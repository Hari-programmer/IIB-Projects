/*EATE FUNCTION Main() RETURNS BOOLE*/
	BEGIN
		-- CALL CopyMessageHeaders();
		-- CALL CopyEntireMessage();
		
--		DECLARE BRef BLOB '3c46696e4d65737361676520786d6c6e733d2275726e3a73776966743a7873643a6d746d73672e32303230223e3c426c6f636b313e3c4170706c69636174696f6e4964656e7469666965723e463c2f4170706c69636174696f6e4964656e7469666965723e3c536572766963654964656e7469666965723e30313c2f536572766963654964656e7469666965723e3c4c6f676963616c5465726d696e616c416464726573733e504242454d594b30415858583c2f4c6f676963616c5465726d696e616c416464726573733e3c53657373696f6e4e756d6265723e343137363c2f53657373696f6e4e756d6265723e3c53657175656e63654e756d6265723e3037393333303c2f53657175656e63654e756d6265723e3c2f426c6f636b313e3c426c6f636b323e3c4f75747075744964656e7469666965723e4f3c2f4f75747075744964656e7469666965723e3c4d657373616765547970653e3130333c2f4d657373616765547970653e3c496e70757454696d653e303635313c2f496e70757454696d653e3c4d657373616765496e7075745265666572656e63653e3c446174653e3231303131303c2f446174653e3c4c544964656e7469666965723e4349414c43484230413c2f4c544964656e7469666965723e3c4272616e6368436f64653e5858583c2f4272616e6368436f64653e3c53657373696f6e4e756d6265723e333239353c2f53657373696f6e4e756d6265723e3c49534e3e3138303638383c2f49534e3e3c2f4d657373616765496e7075745265666572656e63653e3c446174653e3231303131323c2f446174653e3c54696d653e313235373c2f54696d653e3c4d6573736167655072696f726974793e4e3c2f4d6573736167655072696f726974793e3c2f426c6f636b323e3c426c6f636b333e3c463130383e38333535363331302f325858585858583c2f463130383e3c463132313e30336565326236362d646533302d343434662d613432332d6235633739666637386530643c2f463132313e3c2f426c6f636b333e3c426c6f636b343e3c446f63756d656e7420786d6c6e733d2275726e3a73776966743a7873643a66696e2e3130332e32303230223e3c4d543130333e3c463230613e3c4632303e38333535363331302f325858585858583c2f4632303e3c2f463230613e3c463233615f313e3c463233423e435245443c2f463233423e3c2f463233615f313e3c463332613e3c463332413e3c446174653e3231303130363c2f446174653e3c43757272656e63793e4348463c2f43757272656e63793e3c416d6f756e743e333438372c3c2f416d6f756e743e3c2f463332413e3c2f463332613e3c463333613e3c463333423e3c43757272656e63793e4348463c2f43757272656e63793e3c416d6f756e743e333530302c3c2f416d6f756e743e3c2f463333423e3c2f463333613e3c463530613e3c463530463e3c50617274794964656e7469666965723e3c4163636f756e743e4348323630383730343030313438333336323134363c2f4163636f756e743e3c2f50617274794964656e7469666965723e3c4e616d65416e64416464726573733e3c4c696e657332746f353e3c4e756d6265723e313c2f4e756d6265723e3c44657461696c733e416e6f6e796d697365643c2f44657461696c733e3c2f4c696e657332746f353e3c4c696e657332746f353e3c4e756d6265723e323c2f4e756d6265723e3c44657461696c733e416e6f6e796d697365643c2f44657461696c733e3c2f4c696e657332746f353e3c4c696e657332746f353e3c4e756d6265723e333c2f4e756d6265723e3c44657461696c733e43482f416e6f6e796d697365643c2f44657461696c733e3c2f4c696e657332746f353e3c2f4e616d65416e64416464726573733e3c2f463530463e3c2f463530613e3c463532613e3c463532413e3c4964656e746966696572436f64653e41454b54434832323c2f4964656e746966696572436f64653e3c2f463532413e3c2f463532613e3c463533613e3c463533413e3c4964656e746966696572436f64653e534e425a43485a5a3c2f4964656e746966696572436f64653e3c2f463533413e3c2f463533613e3c463534613e3c463534413e3c4964656e746966696572436f64653e5542535743485a483830413c2f4964656e746966696572436f64653e3c2f463534413e3c2f463534613e3c463539613e3c4635393e3c4163636f756e743e342d303530383338342d33323c2f4163636f756e743e3c4e616d65416e64416464726573733e3c4c696e653e416e6f6e796d697365643c2f4c696e653e3c4c696e653e416e6f6e796d697365643c2f4c696e653e3c4c696e653e416e6f6e796d697365643c2f4c696e653e3c4c696e653e416e6f6e796d697365643c2f4c696e653e3c2f4e616d65416e64416464726573733e3c2f4635393e3c2f463539613e3c463730613e3c4637303e3c4e61727261746976653e3c4c696e653e554e54455248414c5420465545522045484520465241553c2f4c696e653e3c2f4e61727261746976653e3c2f4637303e3c2f463730613e3c463731615f313e3c463731413e42454e3c2f463731413e3c2f463731615f313e3c463731615f323e3c463731463e3c43757272656e63793e4348463c2f43757272656e63793e3c416d6f756e743e382c3c2f416d6f756e743e3c2f463731463e3c2f463731615f323e3c463731615f323e3c463731463e3c43757272656e63793e4348463c2f43757272656e63793e3c416d6f756e743e352c3c2f416d6f756e743e3c2f463731463e3c2f463731615f323e3c2f4d543130333e3c2f446f63756d656e743e3c2f426c6f636b343e3c426c6f636b353e3c43484b3e3833393134373131413141343c2f43484b3e3c544e473e3c2f544e473e3c444c4d3e3c2f444c4d3e3c2f426c6f636b353e3c2f46696e4d6573736167653e';
--		DECLARE charref2 CHARACTER CAST(BRef AS CHARACTER CCSID 1208);
		
		--DECLARE ASRef BLOB ASBITSTREAM(InputRoot.DFDL, InputRoot.Properties.Encoding, InputRoot.Properties.CodedCharSetId); 
		
		DECLARE EV REFERENCE TO Environment.Variables;
		DECLARE i INTEGER 1;
		--DECLARE Blobref BLOB ;
--		--DECLARE Blob2 BLOB;
--	
		FOR ref AS InputRoot.DFDL.CsvInput.record[] DO
--		
--		--DECLARE Dref BLOB  CAST(ref.PAYLOAD AS BLOB CCSID 1208);
--		--DECLARE Dref1 BLOB CAST(Dref AS BLOB CCSID 1208);
--		--DECLARE Dref2 CHARACTER CAST(Dref AS CHARACTER CCSID 1208);
--		
--		SET OutputRoot.BLOB.BLOB = CAST(ref.PAYLOAD AS BLOB CCSID 1208 );
--		DECLARE BRef BLOB OutputRoot.BLOB.BLOB; 
        DECLARE BRef BLOB CAST(ref.PAYLOAD AS BLOB CCSID 1208 );
		--SET EV.Bobref[] = BRef;
--		--DECLARE CharRef CHARACTER CAST(CAST(Dref AS BLOB CCSID 1208) AS CHARACTER CCSID 1208);
	    --DECLARE charref2 CHARACTER CAST(BRef AS CHARACTER CCSID 1208);
----      DECLARE ChRef BLOB charref2;
        DECLARE chRef2 CHARACTER CAST(BRef AS CHARACTER CCSID 1208);
        
        
--        DECLARE BRef1 BLOB chRef2;
--        DECLARE chRef3 CHARACTER CAST(BRef1 AS CHARACTER CCSID 1208);
        --DECLARE Blobref BLOB chRef2;
--	  
--		--  DECLARE charref1 CHARACTER CAST(CharRef AS CHARACTER CCSID 1208);	
------		DECLARE Dref2 BLOB CAST(CharRef AS BLOB CCSID 1208);
------		SET EV.Blobref1 = CAST(Dref2 AS BLOB CCSID 1208);
------		DECLARE CharRef1 CHARACTER CAST(EV.Blobref1 AS CHARACTER CCSID 1208);
--
--		--SET OutputRoot.DFDL.CSVOutput.record[i].PAYLOAD =CharRef;
--		
		SET i= i+1;	
		END FOR;
		
		--DECLARE CharRef1 CHARACTER CAST(CHAR1 As CHARACTER CCSID 1208);
		--SET OutputRoot.BLOB.BLOB.record[i].payload= EV.Blobref;
		
		
		
		
		
--		SET i= i+1;	
--		END FOR;
--		






		
		--SET OutputRoot.XMLNSC.payload[i]. =CharRef;
		
	
		
--		
		
		
		
		RETURN TRUE;
	END;

	CREATE PROCEDURE CopyMessageHeaders() BEGIN
		DECLARE I INTEGER 1;
		DECLARE J INTEGER;
		SET J = CARDINALITY(InputRoot.*[]);
		WHILE I < J DO
			SET OutputRoot.*[I] = InputRoot.*[I];
			SET I = I + 1;
		END WHILE;
	END;

	CREATE PROCEDURE CopyEntireMessage() BEGIN
		SET OutputRoot = InputRoot;
	END;
